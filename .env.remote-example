# Example configuration for REMOTE analysis server deployment
# Copy this to .env and modify for your setup

# Server Configuration
PORT=12047
NODE_ENV=development
HOST=0.0.0.0

# Database
DATABASE_PATH=./data/library.db

# Python Analysis Server - REMOTE MODE
PYTHON_SERVER_URL=http://192.168.1.100:8000  # Replace with your remote analysis server IP
PYTHON_SERVER_PORT=8000
PYTHON_SERVER_AUTO_START=false  # Don't try to start local server in remote mode
PYTHON_SERVER_STARTUP_TIMEOUT_MS=60000
MAX_CONCURRENT_ANALYSIS=2
ANALYSIS_MAX_RETRIES=3
ANALYSIS_TIMEOUT_MS=300000

# Analysis Server Remote Mode
# Set to 'true' if analysis server runs on a different machine
# - Remote mode: Sends audio file content via multipart upload, receives base64-encoded stems
# - Local mode: Sends file paths, receives file paths (more efficient for co-located servers)
ANALYSIS_SERVER_REMOTE=true

# Remote Analysis Server Health Monitoring
ANALYSIS_SERVER_HEALTH_CHECK_INTERVAL_MS=10000  # Check health every 10 seconds

# Callback URL Configuration
# IMPORTANT: For remote mode, set this to your app server's IP address that the analysis server can reach
# Examples:
#   - Same WiFi network: 192.168.1.50 (your machine's local IP - find with `ip addr` or `ifconfig`)
#   - Public internet: your-domain.com or public IP
# DO NOT use 127.0.0.1 for remote mode - the analysis server won't be able to reach back!
CALLBACK_HOST=192.168.1.50  # Replace with your actual IP address

# Audio Server Configuration
AUDIO_SERVER_HTTP_URL=http://127.0.0.1:8080
AUDIO_SERVER_HTTP_PORT=8080
AUDIO_SERVER_WS_URL=ws://localhost:8080
AUDIO_SERVER_WS_PORT=8080
AUDIO_SERVER_AUTO_START=true
AUDIO_SERVER_AUTO_RESTART=true
AUDIO_SERVER_STARTUP_TIMEOUT_MS=10000
AUDIO_SERVER_HEALTH_CHECK_INTERVAL=30000
AUDIO_SERVER_MAX_RESTARTS=5
AUDIO_SERVER_EXECUTABLE_PATH=/home/chester/dev/music/mismo.dj_audio_server/build/MismoDJ_artefacts/Debug/MismoDJ
AUDIO_SERVER_WORKING_DIR=/home/chester/dev/music/mismo.dj_audio_server/build
AUDIO_SERVER_RECONNECT_DELAY=1000
AUDIO_SERVER_MAX_RECONNECT_DELAY=30000
AUDIO_SERVER_AUTH_TOKEN=

# Library Settings
MAX_CONCURRENT_SCANS=2
AUTO_ANALYZE_NEW_TRACKS=true
AUDIO_FILE_EXTENSIONS=.mp3,.flac,.wav,.m4a,.aac,.ogg,.wma,.aif,.aiff,.opus,.alac,

# Duplicate Detection
DUPLICATE_DETECTION_ENABLED=true
DUPLICATE_HASH_ALGORITHM=xxhash

# File Operations
CONFIRM_FILE_DELETES=true
LOG_FILE_OPERATIONS=true
FILE_OPERATION_BACKUP=true

# WebSocket
WS_PORT=3001
WS_HEARTBEAT_INTERVAL=30000

# Logging
LOG_LEVEL=info
LOG_FILE=./logs/app.log
LOG_MAX_FILES=7
LOG_MAX_SIZE=10485760

# Security
CORS_ORIGIN=*
API_RATE_LIMIT=100

# File Watcher
FILE_WATCHER_ENABLED=true
FILE_WATCHER_DEBOUNCE_MS=1000
